<app-header></app-header>

<div class="container-pagamentos">
  <!-- Cards de Resumo -->
  <div class="resumo-cards">
    <div class="resumo-card card-pago">
      <div class="card-icone icone-pago">
        <span>✓</span>
      </div>
      <div class="card-info">
        <p class="card-label">Pago</p>
        <p class="card-valor">{{ formatarValor(getTotalPago()) }}</p>
      </div>
    </div>

    <div class="resumo-card card-andamento">
      <div class="card-icone icone-andamento">
        <span>⟳</span>
      </div>
      <div class="card-info">
        <p class="card-label">Em andamento</p>
        <p class="card-valor">{{ formatarValor(getTotalEmAndamento()) }}</p>
      </div>
    </div>

    <div class="resumo-card card-pendente">
      <div class="card-icone icone-pendente">
        <span>⏱</span>
      </div>
      <div class="card-info">
        <p class="card-label">Pendente</p>
        <p class="card-valor">{{ formatarValor(getTotalPendente()) }}</p>
      </div>
    </div>
  </div>

  <!-- Filtros e Busca -->
  <div class="acoes-bar">
    <div class="filtros-status">
      <button 
        class="btn-filtro" 
        [class.ativo]="isFiltroAtivo('todos')"
        (click)="mudarFiltro('todos')"
      >
        Todos
      </button>
      <button 
        class="btn-filtro"
        [class.ativo]="isFiltroAtivo('pago')"
        (click)="mudarFiltro('pago')"
      >
        Pago
      </button>
      <button 
        class="btn-filtro"
        [class.ativo]="isFiltroAtivo('em_andamento')"
        (click)="mudarFiltro('em_andamento')"
      >
        Em andamento
      </button>
      <button 
        class="btn-filtro"
        [class.ativo]="isFiltroAtivo('pendente')"
        (click)="mudarFiltro('pendente')"
      >
        Pendente
      </button>
    </div>

    <div class="busca-container">
      <input 
        type="text" 
        class="input-busca" 
        placeholder="Buscar cliente..."
        [(ngModel)]="busca"
        (input)="filtrarPagamentos()"
      />
      <img src="lupa.png" alt="Buscar" class="icon-busca" />
    </div>
  </div>

  <!-- Lista de Pagamentos -->
  <div class="pagamentos-lista">
    <div *ngIf="pagamentosFiltrados.length === 0" class="sem-pagamentos">
      Nenhum pagamento encontrado
    </div>

    <div 
      *ngFor="let pagamento of pagamentosFiltrados"
      class="pagamento-card"
    >
      <div class="pagamento-info">
        <h3 class="pagamento-cliente">{{ pagamento.clienteNome }}</h3>
        <p class="pagamento-produtos">{{ pagamento.produtos.join(', ') }}</p>
        <p class="pagamento-data">{{ pagamento.data | date: 'dd/MM/yyyy' }}</p>
      </div>
      
      <div class="pagamento-detalhes">
        <span 
          class="pagamento-status"
          [ngClass]="getStatusClass(pagamento.status)"
        >
          {{ getStatusTexto(pagamento.status) }}
        </span>
        <p class="pagamento-valor">{{ formatarValor(pagamento.valor) }}</p>
      </div>
    </div>
  </div>
</div>