<app-header></app-header>

<div class="container-produtos">
  <!-- Barra de A√ß√µes -->
  <div class="acoes-bar">
    <div class="acoes-esquerda">
      <button class="btn-adicionar" (click)="abrirModalAdicionar()">
        <span class="icon-plus">+</span>
        ADICIONAR PRODUTO
      </button>
    </div>
    
    <div class="busca-container">
      <input 
        type="text" 
        class="input-busca" 
        placeholder="Buscar produto..."
        [(ngModel)]="busca"
        (input)="buscarProduto()"
      />
      <span class="icon-busca">üîç</span>
    </div>
  </div>

  <!-- Lista de Produtos -->
  <div class="produtos-lista">
    <div *ngIf="produtosFiltrados.length === 0" class="sem-produtos">
      Nenhum produto encontrado
    </div>

    <div 
      *ngFor="let produto of produtosFiltrados" 
      class="produto-card"
    >
      <img 
        [src]="produto.imagem" 
        [alt]="produto.nome"
        class="produto-imagem"
      />
      
      <div class="produto-info">
        <h3 class="produto-nome">{{ produto.nome }}</h3>
        <p class="produto-estoque">
          Estoque: <span class="estoque-valor">{{ produto.estoque }} {{ produto.unidade }}</span>
        </p>
      </div>
      
      <div class="produto-acoes">
        <button 
          class="btn-icone btn-editar" 
          (click)="abrirModalEditar(produto)"
          title="Editar produto"
        >
          ‚úèÔ∏è
        </button>
        <button 
          class="btn-icone btn-remover" 
          (click)="removerProduto(produto.id)"
          title="Remover produto"
        >
          üóëÔ∏è
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal-overlay" *ngIf="mostrarModal" (click)="fecharModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-fechar" (click)="fecharModal()">√ó</button>
    
    <h2 class="modal-titulo">
      {{ modoEdicao ? 'Editar Produto' : 'Adicionar Produto' }}
    </h2>
    
    <div class="modal-formulario">
      <div class="form-group">
        <label class="form-label">Nome do Produto *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="formulario.nome"
          placeholder="Ex: Egeo Dolce Col√¥nia"
        />
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Estoque *</label>
          <input
            type="number"
            class="form-input"
            [(ngModel)]="formulario.estoque"
            min="0"
            placeholder="0"
          />
        </div>
        
        <div class="form-group">
          <label class="form-label">Unidade *</label>
          <select class="form-input" [(ngModel)]="formulario.unidade">
            <option *ngFor="let unidade of unidades" [value]="unidade">
              {{ unidade }}
            </option>
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">URL da Imagem *</label>
        <input
          type="text"
          class="form-input"
          [(ngModel)]="formulario.imagem"
          placeholder="https://exemplo.com/imagem.jpg"
        />
      </div>

      <div class="form-group" *ngIf="formulario.imagem">
        <label class="form-label">Preview da Imagem</label>
        <img 
          [src]="formulario.imagem" 
          alt="Preview"
          class="preview-imagem"
        />
      </div>
      
      <div class="modal-acoes">
        <button class="btn-cancelar" (click)="fecharModal()">
          Cancelar
        </button>
        <button class="btn-salvar" (click)="salvarProduto()">
          {{ modoEdicao ? 'Salvar' : 'Adicionar' }}
        </button>
      </div>
    </div>
  </div>
</div>